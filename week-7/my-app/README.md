## Страница `404`

В Next.js страница `pages/404.tsx` является статической по умолчанию, поэтом в ней нельзя использовать `getServerSideProps`, `getStaticProps` или `getStaticPaths`, так как эта страница должна быть доступна моментально, то есть в ней не должно быть запросов к серверу, так как на это тратиться какое-то время.

В итоге, страница `404.tsx` всегда рендерится статически, и в ней можно использовать только клиентский код

## Заметка про `useLayoutEffect`

На стороне сервера `useLayoutEffect` не выполняется, и React выдает предупреждение, поэтому в Next.js при использовании `useLayoutEffect` нужно проверять `typeof window !== "undefined"`, либо заменять его на `useEffect`

## Порядок выполнения в Next.js

Жизненный цикл запроса следующий:

1. Middleware. Вполняется на уровне сервера перед маршрутизацией, можно использовать для проверки авторизации, редиректов, логирования и др.
2. Route. Next.js определяет, какой компонент страницы рендерить
3. GSSP. Выполняется на сервере и  передает данные на страницу до её рендеринга
4. Render. Рендер страницы 


